=====================
Лабораторна робота №5
=====================

Тема
------

**Workqueue**

Завдання:
---------
 
- Розібратися з Work queue

- Написати модуль ядра, який приймає аргументи *th_val*, *wrk_val* і *jffdelay*, реалізує два потоки і ворк (в дефолтних *work queue*), а також таймер (на базі *timer wheel*)

- Запускає таймер і ворк

- При спрацьовуванні таймера перевіряє поточне значення jiffies, якщо воно кратне th_val - зупинити перший потік; інакше - таймер перезапускається через jffdelay jiffies

- Усередині Ворку перевіряє поточне значення jiffies, якщо воно кратне wrk_val - зупинити другий потік; інакше - ворк повинен заснути на jffdelay jiffies і перезапустити себе.

- Перевірити роботу. Для th_val і wrk_val бажано вибирати прості числа

- Додати два зв'язних списки, в які алокувати і додавати елементи зі значеннями jiffies які не привели до завершення першого і другого потоків відповідно. Виходить зв'язок "таймер - 1й список - 1й потік" і "ворк - 2й список - 2й потік"

- При виході з потоку роздрукувати список

- Усередині Ворку і таймера використовувати правильні алокациії для нових елементів списку, правильну синхронізацію доступу до списку

- Передбачити, що користувач може вивантажити модуль достроково

Хід роботи
----------

Теоретичні відомості по таймерам та потокам було наведено у лабораторних роботах номер 4 та номер 3.
Нововведення по даній роботі було лиш *Workqueue*. Цей інструмент служить для відкладеної обробки данних, є неатомарним, тому і може 
засипати. Виконання функцій в контексті преривань повинно відбуватися швидко. Тому, якщо є завдання виконання великого обсягу
роботи - доцільно використовувати *workqueue*. Як тільки функція буде додана в чергу, вона відпрацює лиш тоді, коли до цієї
функції дійде черга у контексті обробки ядра. Також workqueue можна порівняти з тасклетами, але тасклети дещо гірші. 
Ворк має більше підтримуваних опцій, більш обширний. Також через неатомарність - можуть "засипати".


Висновки
--------

В ході виконання даної лабораторної роботи, було зібрано модуль ядра, який запускає таймер і ворк. Для спрощення виконання було
використано флаги, які допомогли виконати роботу правильно. 
