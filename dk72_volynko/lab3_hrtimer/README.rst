=================================================
**Лабораторна робота №3 засоби відкладеної роботи: таймер високої точності**
=================================================

Завдання
---------------------------------------------------------

* ознайомитись hrtimer
* на основі модулю з минулої лабораторної роботи створити модуль що буде мати такий самий
функціонал але замість звичайного таймеру будемо використовувати таймер високої роздільної здатності

Хід роботи
----------------------------------------------------------

**Написання модуля ядра**
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Таймери з високою роздільною здатністю з'явилися, починаючи з версії ядра 2.6.16, а структури представлення часу для них визначені в файлі <linux / ktime.h>. Їх підтримка присутня тільки в архітектурі, що підтримують апаратні таймери з високою роздільною здатністю. 
Також для них визначається новий часовий тип даних ktime_t- часовий інтервал в наносекундному вираженні, і його представлення сильно відрізняються в залежності від архітектури. Самі операції з таймерами високого дозволу визначені в файлі <linux / hrtimer.h> в структурі, 
що нагадує модель таймерів реального часу. Згідно з отриманим завданням було створено модуль ядра що є переробкою модуля ядра з минулої лабораторної роботи тільки замість використаного в минулій роботі Timeout timer було використано HR timer.

У зв'язку з завданням потрібно використовувати HR timer по цій причині було створено змінну  ktime для виставлення значення expire, та звичайно замінено оброрбник переривань таймеру обробник перериванть HR таймеру повинен повертати змінну типу (enum) HRTIMER_RESTART або HRTIMER_NORESTART
при поверненні значення HRTIMER_RESTART таймер запускається повторно після завершення роботи обробника в іншому випадку таймер повторно не активується. Для зазначеня часу відпрацювання таймеру була використана функція
``hrtimer_forward`` зартимка задається за допомогую типа данних ktime_t за для переводу секунд до цього типу данних використовуємо функцію ktime_set(). Та також видалення HR таймеру відбувається за допомогою функції ``hrtimer_cancel``

Висновки
------------
При виконанні даної лабораторної роботи було перероблено свій модуль ядра з лабораторнрої роботи №2 заміною таймеру на hr таймер при написанні модуля не виникло проблем.
З особливестей які одразу видно таймер високої роздільної здатності має набагато більшу точність, це зумовлено тим що роздільна здатність hr таймерів mk-n секунди а в  timer wheel
міньімальноможлива роздільна здатність- 3ms така велика різниця в точності викликана призначенням цих таймерів timer wheel використовуються на приклад для визначення таймаутів очікування,
а таймери високої роздільної здатності використовують наприклад для генерації ШІМ сигналу. Потрібно зазначити що незважаючи на точність hr таймерів іноді виникали похибки в 1-2 jiffies.
