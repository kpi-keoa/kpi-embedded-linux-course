 ==========================================================
**Лабораторна робота №1 **
==========================================================
**Введення в розробку модулів ядра**
==========================================================
**Завдання:**
~~~~~~~~~~~~~

Зібрати мінімальний модуль Linux-ядра вручну;
Зібрати мінімальне Linux-оточення з використання BusyBox;
Зібрати перший модуль ядра;
Написати та зібрати власний модуль ядра :
При його підключенні, він виводить ім'я користувача передане в якості параметру модуля. Якщо параметр не задано, вивести попередження;
При виклику exit_callback модуля, щоб він виводив значення jiffies та час в секундах від init до exit.

За основу власного модуля взято демонстративний модуль firstmodule.


**Використані бібліотеки**
--------------------------

* ``<linux/module.h>`` потрібна для всіх модулів;
* ``<linux/kernel.h>`` використовується для *sysinfo*;
* ``<linux/init.h>`` використовується для ініціалізації та закриття;
* ``<linux/jiffies.h>`` опис jiffies, допоміжні функції, лічильник;

**Використані макроси та функції**
----------------------------------

* ``MODULE_DESCRIPTION`` опис модуля;

* ``MODULE_AUTHOR`` автори модуля;

* ``MODULE_VERSION`` версія модуля;

* ``MODULE_LICENSE`` тип ліцензії. Використовується подвійна: MIT/GPL;

* ``module_param`` необхідна опису правил передачі параметрів в модуль;

* ``jiffies_delta_to_msecs`` використовується для розрахунку проміжку часу. На вхід очікує різницю *jiffies*;

* ``printk`` стандартний інструмент для друку повідомлень;використовується для виведення інформації в консоль. 

* ``jiffies``  глобальна змінна, яка містить кількість тактів, що сталися з моменту завантаження системи. При завантаженні ядро ініціалізує змінну до нуля, і вона збільшується на одиницю при кожному перериванні таймера.



Висновки
~~~~~~~~

У ході лабораторної роботи було зібрано ядро linux з мінімальним набором оточення з використанням BusyBox.Затестили роботу модуля з передачею параметра ``name`` та без.  При передачі без параметра, виводиться відповідне сповіщення в лог ядра з рівнем ``KERN_WARNING`` та ім'ям користувача - ``$username``. При вивантаженні модуля виводиться час його роботи в секундах.

Запуск без параметрів :

~~~~~~~~


/ # insmod /mnt/lab1_firstmod.ko
[   55.078951] lab1_firstmod: loading out-of-tree module taints kernel.
[   55.087792] Username null,module starts, $username!
[   55.087792] jiffies = 0
[   55.088702] Hello, $username!
[   55.088702]  Jiffies = 4294722229
[   55.090749] insmod (93) used greatest stack depth: 13696 bytes left
/ # rmmod lab1_firstmod
[  151.256662] Long live the Kernel! Work time - 96 sec.
/ #



Запуск з параметром :

~~~~~~~~

/ # insmod /mnt/lab1_firstmod.ko name="user12345"
[  221.471559] Hello, user12345!
[  221.471559]  Jiffies = 4294888611
/ # rmmod lab1_firstmod
[  237.209805] Long live the Kernel! Work time - 15 sec.
/ #


~~~~~~~~

 
