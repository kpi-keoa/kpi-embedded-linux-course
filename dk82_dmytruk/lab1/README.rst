==========================================================
**Лабораторна робота №1 Введення в розробку модулів ядра**
==========================================================


**Завдання:**
~~~~~~~~~~~~~
* Зібрати ядро з BusyBox;
* Зібрати перший модуль ядра;
* Зібрати ядро з BusyBox. Запустити на віртуальній машині.
* Створити модуль який виводить значення змінної яке задається користувачем.
* Доповнити exit_callback модуля, щоб він виводив значення jiffies та час в секундах від init до exit.
* Якщо користувач не задає змінну то вивести попередження

**Хід роботи:**
~~~~~~~~~~~~~~~
За основу власного модуля взято демонстративний модуль ``firstmod``.

**Використані бібліотеки**
--------------------------

* ``<linux/module.h>`` потрібна для всіх модулів;
* ``<linux/kernel.h>`` використовується для *sysinfo*;
* ``<linux/init.h>`` використовується для ініціалізації та закриття;
* ``<linux/jiffies.h>`` тут "живе" лічильник та допоміжні функції;

**Використані макроси та функції**
----------------------------------

``MODULE_DESCRIPTION`` макрос для опису модуля;

``MODULE_AUTHOR`` автори модуля;

``MODULE_VERSION`` версія модуля;

``MODULE_LICENSE`` тип ліцензії. У нас подвійна, MIT/GPL;

``module_param`` використовується для передачі параметрів в модуль;

``jiffies_delta_to_msecs`` використовується для розрахунку проміжку часу. На вхід очікує різницю *jiffies*;

``printk`` використовується для виведення інформації в консоль;


Висновки
~~~~~~~~

Було зібрано мінімальне ядро linux та набір user space утиліт, Емуляція поводилася з використанням qemu . В блоці нижче показано результати роботи модулю з передачею параметра ``user`` та без.
При передачі без параметра, виводиться відповідне сповіщення в лог ядра з рівнем ``KERN_WARNING`` та ім'ям користувача - ``$username``. Також при вигрузці модуля виводиться час його роботи в секундах.

.. code-block:: bash

 / # insmod ./mnt/firstmod.ko
[   84.592849] Module: init module... t:4294751704
[   84.593059] Module starts without username!!!
[   84.593077] Hello, $username!
[   84.593077]  Jiffies = 4294751704
/ # rmmod firstmod
[   86.012998] Long live the Kernel! wrk time - 1 sec.
/ # insmod ./mnt/firstmod.ko user_name="Alex"
[   94.560442] Module: init module... t:4294761671
[   94.561080] Hello, Alex!
[   94.561080]  Jiffies = 4294761672
/ # rmmod firstmod
[   96.180952] Long live the Kernel! wrk time - 1 sec.
