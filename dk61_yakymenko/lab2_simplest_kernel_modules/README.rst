============
Лабораторна робота 2
============

***************
Завдання
***************

- Собрать модуль ядра из примера выше на x86 и BBXM. После каждого подключения и отключения модуля к ядру смотреть логи ядра (лучше всего, с использованием dmesg)

- Взять секундомер. Засечь время между двумя включениями модуля на x86 и BBXM. Взять соответствующие значения jiffies из логов. Зависит ли разница в двух значениях jiffies от платформы? Почему? Обоснование включить в протокол.

- Экспериментально рассчитать время (в миллисекундах), равное 1 jiffies. Сравнить с теоретическим значением. Результаты включить в протокол по работе.

- подправить модуль из примера, что бы вместо username, выводилось имя, переданное в качестве параметра модуля при его подключении insmod
- добавить в init полученного модуля ядра тасклет, который также выведет текущее значение jiffies
- объяснить, почему разница между двумя выводимыми jiffies (в init и в тасклете) может быть равна 0, 1 или 2

***************
Хід роботи
***************
Для того, щоб порахувати теоретичне значення jiffies спершу потрібно дізнатись яке значення HZ(частота переривань в лінуксі). Це було зроблено за допомогою команди:

`grep 'CONFIG_HZ=' /boot/config-$(uname -r)`

Виявилось, що на х86 значення **HZ = 250**, а для BBB **HZ = 100**.

Тобто 1 jiffies це

- для х86 **1000мс / 250 = 4мс**
- для ВВВ **1000мс / 100 = 10мс**

З теорії відомо, що HZ це кількість jiffies в секунду тож тепер у нас є достатньо інформаці для того, щоб порахувати теоретичне значення jiffies для кожної платформи. Дослід буду проводити при 5 секундах реального часу.

Отже, при 5 секундах jiffies

- для х86 = **250 * 5 = 1250**
- для ВВВ **= 100 * 5 = 500** 

Тепер час переходити до практики. 

Після досліду було отримано такі дані:

.. table:: 

    +-----------------+--------+-------+
    |                 | х86    |   ВВВ | 
    +=================+========+=======+
    | **Час**         | 5.36с  | 5.36с |
    +-----------------+--------+-------+
    | **jiffies**     | 1360   | 546   |
    +-----------------+--------+-------+
    | **1 jiffies**   | 3.94мс | 9.8мс |
    +-----------------+--------+-------+

Тобто виміряні результати майже повністю збігаються з теоретичними, а невелика похибка є похиюкою у вимірюванні. 

Наступною частиню завдання було додати у модуль тасклет та вивести в ньому значеня jiffies. Після досліду виявилось, що значення jiffies в тасклеті повністю співпадає у 100% дослідів на двох платформах. Відсутність будь-якої різніці може пояснюватись тим, що модуль дуже маленький і фактчно нічого окрім друку інформації не робить, тому і немає жодних затримок. Також під час досліду оюидві платформи були не навантажені.

***************
Висновок
***************
В процесі роботи було побудовано та запущено перший в житті модуль ядра операційної системи Лінукс. В ході дослідження було виявлено, що результати jiffies повністю збігаються з теретичними та залежать тільки від сконфігурованого значення HZ. 

Значення jiffies тасклеті не відрізнялось від значення в модулі це пояснюється простим модулем та ненавантаженою системою.
